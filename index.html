<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepWeb - Deep16 (深十六) Integrated Development Environment</title>
    <link rel="stylesheet" href="deep16_style.css">
</head>
<body>
    <div class="header-container">
        <div class="header">
            <h1>DeepWeb - Deep16 (深十六) IDE</h1>
            <div class="subtitle">Architecture v3.5 (1r11a) - Integrated Assembler & Simulator</div>
        </div>
        <div class="transcript-panel">
            <div class="panel-header">Transcript</div>
            <div id="transcript" class="transcript">
                <!-- Transcript entries will appear here -->
            </div>
        </div>
    </div>
    
    <div class="controls">
        <button id="assemble-btn">Assemble</button>
        <button id="run-btn" disabled>Run</button>
        <button id="step-btn" disabled>Step</button>
        <button id="reset-btn" disabled>Reset</button>
        <div style="flex: 1"></div>
        <button id="load-example">Load Fibonacci Example</button>
    </div>
    
    <div class="container">
        <div class="editor-panel">
            <div class="panel-header">Deep16 Assembler Editor</div>
            <textarea id="editor" class="editor" spellcheck="false">; Deep16 (深十六) Fibonacci Example
; Calculate Fibonacci numbers

.org 0x0000

main:
    MOV  SP, 0x7FFF    ; Initialize stack
    MOV  R0, 0         ; F(0) = 0
    MOV  R1, 1         ; F(1) = 1
    MOV  R2, 10        ; Calculate up to F(10)
    MOV  R3, 0x0200    ; Output address
    
fib_loop:
    ST   R0, R3, 0     ; Store current Fibonacci
    ADD  R3, 2         ; Next output address
    
    MOV  R4, R1        ; temp = current
    ADD  R1, R0        ; next = current + previous
    MOV  R0, R4        ; previous = temp
    
    SUB  R2, 1         ; decrement counter
    JNZ  R2, fib_loop  ; loop if not zero
    
    HALT

.org 0x0200
fibonacci_results:
    .word 0</textarea>
            
            <div class="symbols-section">
                <div class="section-title">Symbol Table</div>
                <div id="symbol-table" class="symbol-table">
                    <!-- Symbols will be populated here -->
                </div>
            </div>
        </div>
        
        <div class="memory-panel">
            <div class="panel-header">Deep16 Memory & Registers</div>
            <div class="registers-container">
                <!-- PSW Display -->
                <div class="register-section">
                    <div class="section-title">Processor Status Word (PSW)</div>
                    <div class="psw-display">
                        <div class="psw-bits">
                            <div class="psw-bit">
                                <div class="psw-label">DE</div>
                                <div class="psw-value" id="psw-de">0</div>
                            </div>
                            <div class="psw-bit">
                                <div class="psw-label">ER</div>
                                <div class="psw-value" id="psw-er">0</div>
                            </div>
                            <div class="psw-bit">
                                <div class="psw-label">DS</div>
                                <div class="psw-value" id="psw-ds">0</div>
                            </div>
                            <div class="psw-bit">
                                <div class="psw-label">DR</div>
                                <div class="psw-value" id="psw-dr">0</div>
                            </div>
                            <div class="psw-bit">
                                <div class="psw-label">X</div>
                                <div class="psw-value" id="psw-x1">0</div>
                            </div>
                            <div class="psw-bit">
                                <div class="psw-label">X</div>
                                <div class="psw-value" id="psw-x2">0</div>
                            </div>
                            <div class="psw-bit">
                                <div class="psw-label">I</div>
                                <div class="psw-value" id="psw-i">0</div>
                            </div>
                            <div class="psw-bit">
                                <div class="psw-label">S</div>
                                <div class="psw-value" id="psw-s">0</div>
                            </div>
                            <div class="psw-bit">
                                <div class="psw-label">C</div>
                                <div class="psw-value" id="psw-c">0</div>
                            </div>
                            <div class="psw-bit">
                                <div class="psw-label">V</div>
                                <div class="psw-value" id="psw-v">0</div>
                            </div>
                            <div class="psw-bit">
                                <div class="psw-label">Z</div>
                                <div class="psw-value" id="psw-z">0</div>
                            </div>
                            <div class="psw-bit">
                                <div class="psw-label">N</div>
                                <div class="psw-value" id="psw-n">0</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- General Purpose Registers -->
                <div class="register-section">
                    <div class="section-title">General Purpose Registers (R0-R15)</div>
                    <div class="register-grid" id="register-grid">
                        <!-- Filled by JavaScript -->
                    </div>
                </div>
                
                <!-- Segment Registers -->
                <div class="register-section">
                    <div class="section-title">Segment Registers</div>
                    <div class="register-grid">
                        <div class="register">
                            <span class="register-name">CS</span>
                            <span class="register-value" id="reg-cs">0x0000</span>
                        </div>
                        <div class="register">
                            <span class="register-name">DS</span>
                            <span class="register-value" id="reg-ds">0x0000</span>
                        </div>
                        <div class="register">
                            <span class="register-name">SS</span>
                            <span class="register-value" id="reg-ss">0x0000</span>
                        </div>
                        <div class="register">
                            <span class="register-name">ES</span>
                            <span class="register-value" id="reg-es">0x0000</span>
                        </div>
                    </div>
                </div>
                
                <!-- Shadow Registers -->
                <div class="register-section shadow-section">
                    <div class="section-title">Shadow Registers (Interrupt Context)</div>
                    <div class="register-grid">
                        <div class="register">
                            <span class="register-name">PSW'</span>
                            <span class="register-value" id="reg-psw-shadow">0x0000</span>
                        </div>
                        <div class="register">
                            <span class="register-name">PC'</span>
                            <span class="register-value" id="reg-pc-shadow">0x0000</span>
                        </div>
                        <div class="register">
                            <span class="register-name">CS'</span>
                            <span class="register-value" id="reg-cs-shadow">0x0000</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="panel-header">Memory Display (Word Addressing)</div>
            <div class="memory-controls">
                <label for="memory-start-address">Start Address:</label>
                <input type="text" id="memory-start-address" value="0x0000" placeholder="0x0000">
                <label for="symbol-select">or select symbol:</label>
                <select id="symbol-select">
                    <option value="">-- Select Symbol --</option>
                </select>
                <button id="memory-jump-btn">Jump</button>
            </div>
            <div id="memory-display" class="memory-display">
                <!-- Memory content will be populated by JavaScript -->
            </div>
        </div>
    </div>
    
    <div id="status-bar" class="status-bar">
        DeepWeb Ready - Architecture v3.5 (1r11a) - Enter assembly code and click 'Assemble'
    </div>

    <script src="deep16_assembler.js"></script>
    <script src="deep16_simulator.js"></script>
    <script src="deep16_ui.js"></script>
</body>
</html>
